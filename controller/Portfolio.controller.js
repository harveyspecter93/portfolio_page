sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/library"],function(e,t,o){"use strict";const i=o.URLHelper;return e.extend("ch.draeyer.mike.portfolio.controller.Portfolio",{onInit:function(){this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());const e=sap.ui.require.toUrl("ch/draeyer/mike/portfolio/model/data.json"),o=sap.ui.require.toUrl("ch/draeyer/mike/portfolio/img/draeyer_mike.png");let i=new t(e);i.dataLoaded().then(e=>{this.getView().byId("avatar").setSrc(o);this.getView().setModel(i,"ObjectPageModel")})},onGeneradteQrCode:function(e){let t=this.getView().getModel("ObjectPageModel");const o=t.getProperty("/QrCode/inputValue");if(!o){return}t.setProperty("/QrCode/isImgVisible",true);t.setProperty("/QrCode/imgSrc",`http://localhost:8005/https://qrtag.net/api/qr_12.svg?url=${o}`)},onOpenInsta:function(){i.redirect("https://www.instagram.com/michualoha",true)},onPokemonSelectChange:function(e){const t=e.getParameters().selectedItem.getKey().split("/").slice(-2)[0];let o=this.getView().byId("imgPokemon"),i=this.getView().byId("txtFlavor");this._getPokemonById(t).then(e=>{let t=e.species.flavor_text_entries.filter(e=>e.language.name==="en"),n=t.sort(()=>.5-Math.random())[0].flavor_text;o.setSrc(e.form.sprites.front_default);i.setText(n)})},onPressSendMail:function(){this._getDialog("SendMail").open()},onSendMail:function(e){const t=e.getSource().getParent(),o=t.getModel("i18n").getResourceBundle(),n=this._findControl(t,"sap.m.Select"),r=this._findControl(t,"sap.m.RadioButtonGroup");let s=n.getSelectedItem().getKey(),a=o.getText("dialogs.sendmail.presubject")+" "+r.getSelectedButton().getText();i.triggerEmail(s,a)},onQrLiveChange:function(e){const t=e.getParameters().newValue;let o=this.getView().getModel("ObjectPageModel");o.setProperty("/QrCode/isBtnEnabled",!!t);if(!t){o.setProperty("/QrCode/isImgVisible",false)}},onToggleFooter:function(){let e=this.getView().getModel("ObjectPageModel"),t=e.getProperty("/isFooterVisible");this.getView().getModel("ObjectPageModel").setProperty("/isFooterVisible",!t)},_findControl:function(e,t){if(e.isA(t)){return e}else{switch(true){case e.isA("sap.m.Dialog"):for(const o of e.getContent()){e=this._findControl(o,t);if(e){return e}}break;case e.isA("sap.m.FlexBox"):for(const o of e.getItems()){e=this._findControl(o,t);if(e){return e}}break;default:e=undefined;break}}},_getDialog:function(e){let t=this["_o"+e];if(!t){t=sap.ui.xmlfragment(e,"ch.draeyer.mike.portfolio.view.dialogs."+e,this);t.setModel(this.getView().getModel("i18n"),"i18n");t.setModel(this.getView().getModel("ObjectPageModel"),"ObjectPageModel");this["_o"+e]=t;this.getView().addDependent(t)}return t},_getPokemonById:async e=>{const t=await fetch(`https://pokeapi.co/api/v2/pokemon-species/${e}/`);const o=await fetch(`https://pokeapi.co/api/v2/pokemon-form/${e}/`);return{species:await t.json(),form:await o.json()}}})});
//# sourceMappingURL=Portfolio.controller.js.map